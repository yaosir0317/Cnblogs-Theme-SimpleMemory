/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /gh/yaosir0317/Cnblogs-Theme-SimpleMemory@92bd82f20d69183c844c7bd3eb543c8c8fdb0592/js/loading.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";!function(){var t={},i=t.util={},e=Array.prototype.concat,n=Array.prototype.slice;i.bind=function(t,i){var s=n.call(arguments,2);return function(){t.apply(i,e.call(s,n.call(arguments)))}},i.extend=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])};var s=t.SpringSystem=function(t){this._springRegistry={},this._activeSprings=[],this.listeners=[],this._idleSpringIndices=[],this.looper=t||new h,this.looper.springSystem=this};i.extend(s.prototype,{_springRegistry:null,_isIdle:!0,_lastTimeMillis:-1,_activeSprings:null,listeners:null,_idleSpringIndices:null,setLooper:function(t){this.looper=t,t.springSystem=this},createSpring:function(t,i){var e;return e=void 0===t||void 0===i?a.DEFAULT_ORIGAMI_SPRING_CONFIG:a.fromOrigamiTensionAndFriction(t,i),this.createSpringWithConfig(e)},createSpringWithBouncinessAndSpeed:function(t,i){var e;return e=void 0===t||void 0===i?a.DEFAULT_ORIGAMI_SPRING_CONFIG:a.fromBouncinessAndSpeed(t,i),this.createSpringWithConfig(e)},createSpringWithConfig:function(t){var i=new r(this);return this.registerSpring(i),i.setSpringConfig(t),i},getIsIdle:function(){return this._isIdle},getSpringById:function(t){return this._springRegistry[t]},getAllSprings:function(){var t=[];for(var i in this._springRegistry)this._springRegistry.hasOwnProperty(i)&&t.push(this._springRegistry[i]);return t},registerSpring:function(t){this._springRegistry[t.getId()]=t},deregisterSpring:function(t){_(this._activeSprings,t),delete this._springRegistry[t.getId()]},advance:function(t,i){for(;this._idleSpringIndices.length>0;)this._idleSpringIndices.pop();for(var e=0,n=this._activeSprings.length;e<n;e++){var s=this._activeSprings[e];s.systemShouldAdvance()?s.advance(t/1e3,i/1e3):this._idleSpringIndices.push(this._activeSprings.indexOf(s))}for(;this._idleSpringIndices.length>0;){var r=this._idleSpringIndices.pop();r>=0&&this._activeSprings.splice(r,1)}},loop:function(t){var i;-1===this._lastTimeMillis&&(this._lastTimeMillis=t-1);var e=t-this._lastTimeMillis;this._lastTimeMillis=t;var n=0,s=this.listeners.length;for(n=0;n<s;n++)(i=this.listeners[n]).onBeforeIntegrate&&i.onBeforeIntegrate(this);for(this.advance(t,e),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),n=0;n<s;n++)(i=this.listeners[n]).onAfterIntegrate&&i.onAfterIntegrate(this);this._isIdle||this.looper.run()},activateSpring:function(t){var i=this._springRegistry[t];-1==this._activeSprings.indexOf(i)&&this._activeSprings.push(i),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())},addListener:function(t){this.listeners.push(t)},removeListener:function(t){_(this.listeners,t)},removeAllListeners:function(){this.listeners=[]}});var r=t.Spring=function t(i){this._id="s"+t._ID++,this._springSystem=i,this.listeners=[],this._currentState=new o,this._previousState=new o,this._tempState=new o};i.extend(r,{_ID:0,MAX_DELTA_TIME_SEC:.064,SOLVER_TIMESTEP_SEC:.001}),i.extend(r.prototype,{_id:0,_springConfig:null,_overshootClampingEnabled:!1,_currentState:null,_previousState:null,_tempState:null,_startValue:0,_endValue:0,_wasAtRest:!0,_restSpeedThreshold:.001,_displacementFromRestThreshold:.001,listeners:null,_timeAccumulator:0,_springSystem:null,destroy:function(){this.listeners=[],this.frames=[],this._springSystem.deregisterSpring(this)},getId:function(){return this._id},setSpringConfig:function(t){return this._springConfig=t,this},getSpringConfig:function(){return this._springConfig},setCurrentValue:function(t,i){return this._startValue=t,this._currentState.position=t,i||this.setAtRest(),this.notifyPositionUpdated(!1,!1),this},getStartValue:function(){return this._startValue},getCurrentValue:function(){return this._currentState.position},getCurrentDisplacementDistance:function(){return this.getDisplacementDistanceForState(this._currentState)},getDisplacementDistanceForState:function(t){return Math.abs(this._endValue-t.position)},setEndValue:function(t){if(this._endValue==t&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=t,this._springSystem.activateSpring(this.getId());for(var i=0,e=this.listeners.length;i<e;i++){var n=this.listeners[i].onSpringEndStateChange;n&&n(this)}return this},getEndValue:function(){return this._endValue},setVelocity:function(t){return t===this._currentState.velocity?this:(this._currentState.velocity=t,this._springSystem.activateSpring(this.getId()),this)},getVelocity:function(){return this._currentState.velocity},setRestSpeedThreshold:function(t){return this._restSpeedThreshold=t,this},getRestSpeedThreshold:function(){return this._restSpeedThreshold},setRestDisplacementThreshold:function(t){this._displacementFromRestThreshold=t},getRestDisplacementThreshold:function(){return this._displacementFromRestThreshold},setOvershootClampingEnabled:function(t){return this._overshootClampingEnabled=t,this},isOvershootClampingEnabled:function(){return this._overshootClampingEnabled},isOvershooting:function(){var t=this._startValue,i=this._endValue;return this._springConfig.tension>0&&(t<i&&this.getCurrentValue()>i||t>i&&this.getCurrentValue()<i)},advance:function(t,i){var e=this.isAtRest();if(!e||!this._wasAtRest){var n=i;i>r.MAX_DELTA_TIME_SEC&&(n=r.MAX_DELTA_TIME_SEC),this._timeAccumulator+=n;for(var s,o,a,h,u,l,c,p,g=this._springConfig.tension,_=this._springConfig.friction,d=this._currentState.position,f=this._currentState.velocity,v=this._tempState.position,S=this._tempState.velocity;this._timeAccumulator>=r.SOLVER_TIMESTEP_SEC;)this._timeAccumulator-=r.SOLVER_TIMESTEP_SEC,this._timeAccumulator<r.SOLVER_TIMESTEP_SEC&&(this._previousState.position=d,this._previousState.velocity=f),s=f,o=g*(this._endValue-v)-_*f,v=d+s*r.SOLVER_TIMESTEP_SEC*.5,a=S=f+o*r.SOLVER_TIMESTEP_SEC*.5,h=g*(this._endValue-v)-_*S,v=d+a*r.SOLVER_TIMESTEP_SEC*.5,u=S=f+h*r.SOLVER_TIMESTEP_SEC*.5,l=g*(this._endValue-v)-_*S,v=d+u*r.SOLVER_TIMESTEP_SEC*.5,c=S=f+l*r.SOLVER_TIMESTEP_SEC*.5,p=1/6*(o+2*(h+l)+(g*(this._endValue-v)-_*S)),d+=1/6*(s+2*(a+u)+c)*r.SOLVER_TIMESTEP_SEC,f+=p*r.SOLVER_TIMESTEP_SEC;this._tempState.position=v,this._tempState.velocity=S,this._currentState.position=d,this._currentState.velocity=f,this._timeAccumulator>0&&this._interpolate(this._timeAccumulator/r.SOLVER_TIMESTEP_SEC),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(this._springConfig.tension>0?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),e=!0);var m=!1;this._wasAtRest&&(this._wasAtRest=!1,m=!0);var y=!1;e&&(this._wasAtRest=!0,y=!0),this.notifyPositionUpdated(m,y)}},notifyPositionUpdated:function(t,i){for(var e=0,n=this.listeners.length;e<n;e++){var s=this.listeners[e];t&&s.onSpringActivate&&s.onSpringActivate(this),s.onSpringUpdate&&s.onSpringUpdate(this),i&&s.onSpringAtRest&&s.onSpringAtRest(this)}},systemShouldAdvance:function(){return!this.isAtRest()||!this.wasAtRest()},wasAtRest:function(){return this._wasAtRest},isAtRest:function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},setAtRest:function(){return this._endValue=this._currentState.position,this._tempState.position=this._currentState.position,this._currentState.velocity=0,this},_interpolate:function(t){this._currentState.position=this._currentState.position*t+this._previousState.position*(1-t),this._currentState.velocity=this._currentState.velocity*t+this._previousState.velocity*(1-t)},getListeners:function(){return this.listeners},addListener:function(t){return this.listeners.push(t),this},removeListener:function(t){return _(this.listeners,t),this},removeAllListeners:function(){return this.listeners=[],this},currentValueIsApproximately:function(t){return Math.abs(this.getCurrentValue()-t)<=this.getRestDisplacementThreshold()}});var o=function(){};i.extend(o.prototype,{position:0,velocity:0});var a=t.SpringConfig=function(t,i){this.tension=t,this.friction=i},h=t.AnimationLooper=function(){this.springSystem=null;var t=this,e=function(){t.springSystem.loop(Date.now())};this.run=function(){i.onFrame(e)}};t.SimulationLooper=function(t){this.springSystem=null;var i=0,e=!1;t=t||16.667,this.run=function(){if(!e){for(e=!0;!this.springSystem.getIsIdle();)this.springSystem.loop(i+=t);e=!1}}},t.SteppingSimulationLooper=function(t){this.springSystem=null;var i=0;this.run=function(){},this.step=function(t){this.springSystem.loop(i+=t)}};var u=t.OrigamiValueConverter={tensionFromOrigamiValue:function(t){return 3.62*(t-30)+194},origamiValueFromTension:function(t){return(t-194)/3.62+30},frictionFromOrigamiValue:function(t){return 3*(t-8)+25},origamiFromFriction:function(t){return(t-25)/3+8}},l=t.BouncyConversion=function(t,i){this.bounciness=t,this.speed=i;var e=this.normalize(t/1.7,0,20);e=this.projectNormal(e,0,.8);var n=this.normalize(i/1.7,0,20);this.bouncyTension=this.projectNormal(n,.5,200),this.bouncyFriction=this.quadraticOutInterpolation(e,this.b3Nobounce(this.bouncyTension),.01)};i.extend(l.prototype,{normalize:function(t,i,e){return(t-i)/(e-i)},projectNormal:function(t,i,e){return i+t*(e-i)},linearInterpolation:function(t,i,e){return t*e+(1-t)*i},quadraticOutInterpolation:function(t,i,e){return this.linearInterpolation(2*t-t*t,i,e)},b3Friction1:function(t){return 7e-4*Math.pow(t,3)-.031*Math.pow(t,2)+.64*t+1.28},b3Friction2:function(t){return 44e-6*Math.pow(t,3)-.006*Math.pow(t,2)+.36*t+2},b3Friction3:function(t){return 4.5e-7*Math.pow(t,3)-332e-6*Math.pow(t,2)+.1078*t+5.84},b3Nobounce:function(t){return t<=18?this.b3Friction1(t):t>18&&t<=44?this.b3Friction2(t):this.b3Friction3(t)}}),i.extend(a,{fromOrigamiTensionAndFriction:function(t,i){return new a(u.tensionFromOrigamiValue(t),u.frictionFromOrigamiValue(i))},fromBouncinessAndSpeed:function(i,e){var n=new t.BouncyConversion(i,e);return this.fromOrigamiTensionAndFriction(n.bouncyTension,n.bouncyFriction)},coastingConfigWithOrigamiFriction:function(t){return new a(0,u.frictionFromOrigamiValue(t))}}),a.DEFAULT_ORIGAMI_SPRING_CONFIG=a.fromOrigamiTensionAndFriction(40,7),i.extend(a.prototype,{friction:0,tension:0});var c={};i.hexToRGB=function(t){if(c[t])return c[t];3===(t=t.replace("#","")).length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var i=t.match(/.{2}/g),e={r:parseInt(i[0],16),g:parseInt(i[1],16),b:parseInt(i[2],16)};return c[t]=e,e},i.rgbToHex=function(t,i,e){return t=t.toString(16),i=i.toString(16),e=e.toString(16),"#"+(t=t.length<2?"0"+t:t)+(i=i.length<2?"0"+i:i)+(e=e.length<2?"0"+e:e)};var p,g=t.MathUtil={mapValueInRange:function(t,i,e,n,s){return n+(t-i)/(e-i)*(s-n)},interpolateColor:function(t,e,n,s,r,o){s=void 0===s?0:s,r=void 0===r?1:r,e=i.hexToRGB(e),n=i.hexToRGB(n);var a=Math.floor(i.mapValueInRange(t,s,r,e.r,n.r)),h=Math.floor(i.mapValueInRange(t,s,r,e.g,n.g)),u=Math.floor(i.mapValueInRange(t,s,r,e.b,n.b));return o?"rgb("+a+","+h+","+u+")":i.rgbToHex(a,h,u)},degreesToRadians:function(t){return t*Math.PI/180},radiansToDegrees:function(t){return 180*t/Math.PI}};function _(t,i){var e=t.indexOf(i);-1!=e&&t.splice(e,1)}i.extend(i,g),"undefined"!=typeof window&&(p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}),p||"undefined"==typeof process||"node"!==process.title||(p=setImmediate),i.onFrame=function(t){return p(t)},"undefined"!=typeof exports?i.extend(exports,t):"undefined"!=typeof window&&(window.rebound=t)}();var _createClass=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}();function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var Polygon=function(){function t(){var i=arguments.length<=0||void 0===arguments[0]?100:arguments[0],e=arguments.length<=1||void 0===arguments[1]?3:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],s=arguments[3];_classCallCheck(this,t),this._radius=i,this._sides=e,this._depth=n,this._colors=s,this._x=0,this._y=0,this.rotation=0,this.scale=1,this.points=this._getRegularPolygonPoints()}return _createClass(t,[{key:"_getRegularPolygonPoints",value:function(){for(var t=[],i=0;i<this._sides;){var e=-this._radius*Math.sin(2*i*Math.PI/this._sides),n=this._radius*Math.cos(2*i*Math.PI/this._sides);t.push({x:e,y:n}),i++}return t}},{key:"_getInscribedPoints",value:function(t,i){var e=this,n=[];return t.forEach(function(s,r){var o=s,a=t[r+1];a||(a=t[0]);var h=e._getInterpolatedPoint(o,a,i);n.push(h)}),n}},{key:"_getInterpolatedPoint",value:function(t,i,e){var n=t.x,s=t.y;return{x:n+(i.x-n)*e,y:s+(i.y-s)*e}}},{key:"_getUpdatedChildren",value:function(t){for(var i=[],e=0;e<this._depth;e++){var n=i[e-1]||this.points,s=this._getInscribedPoints(n,t);i.push(s)}return i}},{key:"renderChildren",value:function(t,i){var e=this,n=this._getUpdatedChildren(i);n.forEach(function(i,s){t.beginPath(),i.forEach(function(i){return t.lineTo(i.x,i.y)}),t.closePath();var r=e._colors.stroke,o=e._colors.child;if(r&&(t.strokeStyle=r,t.stroke()),o){var a=rebound.util.hexToRGB(o),h=1/n.length,u=h+h*s,l="rgba("+a.r+", "+a.g+", "+a.b+", "+u+")";t.fillStyle=l,t.shadowColor="rgba(0,0,0, 0.1)",t.shadowBlur=10,t.shadowOffsetX=0,t.shadowOffsetY=0,t.fill()}})}},{key:"render",value:function(t){t.save(),t.translate(this._x,this._y),0!==this.rotation&&t.rotate(rebound.MathUtil.degreesToRadians(this.rotation)),1!==this.scale&&t.scale(this.scale,this.scale),t.beginPath(),this.points.forEach(function(i){return t.lineTo(i.x,i.y)}),t.closePath();var i=this._colors.stroke,e=this._colors.base;i&&(t.strokeStyle=i,t.stroke()),e&&(t.fillStyle=e,t.fill()),t.restore()}}]),t}();_createClass=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}();function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var Spinner=function(){function t(i){_classCallCheck(this,t);i.id;var e=i.radius,n=i.sides,s=i.depth,r=i.colors,o=i.alwaysForward,a=i.restAt,h=i.renderBase;n<3&&(console.warn("At least 3 sides required."),n=3),this._canvas=document.createElement("canvas"),this._canvas.style.backgroundColor=r.background,this._canvas.style.zIndex=1100,this._canvasW=null,this._canvasH=null,this._canvasOpacity=1,this._centerX=null,this._centerY=null,this._alwaysForward=o,this._restThreshold=a,this._renderBase=h,this._springRangeLow=0,this._springRangeHigh=this._restThreshold||1,this._basePolygon=new Polygon(e,n,s,r),this._progress=0,this._isAutoSpin=null,this._isCompleting=null}return _createClass(t,[{key:"init",value:function(t,i){this._addCanvas(),this._spring=t,this._addSpringListener(),this._isAutoSpin=i,i?this._spin():(this._spring.setEndValue(0),this.render())}},{key:"_addCanvas",value:function(){document.body.appendChild(this._canvas),this._context=this._canvas.getContext("2d"),this._setCanvasSize()}},{key:"_setCanvasSize",value:function(){this._canvasW=this._canvas.width=window.innerWidth,this._canvasH=this._canvas.height=window.innerHeight,this._canvas.style.position="fixed",this._canvas.style.top=0,this._canvas.style.left=0,this._centerX=this._canvasW/2,this._centerY=this._canvasH/2}},{key:"_addSpringListener",value:function(){var t=this;this._spring.addListener({onSpringUpdate:function(i){var e=i.getCurrentValue(),n=t._springRangeLow,s=t._springRangeHigh;e=rebound.MathUtil.mapValueInRange(e,0,1,n,s),t.render(e)}})}},{key:"setComplete",value:function(){this._isCompleting=!0}},{key:"_completeAnimation",value:function(){this._canvasOpacity-=.1,this._canvas.style.opacity=this._canvasOpacity,this._canvasOpacity<=0&&(this._isAutoSpin=!1,this._spring.setAtRest(),this._canvas.style.display="none",this._canvas.remove())}},{key:"_spin",value:function(){if(this._alwaysForward){var t=this._spring.getCurrentValue();this._restThreshold&&1===t&&this._switchSpringRange(),1===t&&this._spring.setCurrentValue(0).setAtRest()}this._spring.setEndValue(1===this._spring.getCurrentValue()?0:1)}},{key:"_switchSpringRange",value:function(){var t=this._restThreshold;this._springRangeLow=this._springRangeLow===t?0:t,this._springRangeHigh=this._springRangeHigh===t?1:t}},{key:"render",value:function(t){t&&(this._progress=Math.round(1e4*t)/1e4),this._isAutoSpin&&this._spring.isAtRest()&&this._spin(),this._isCompleting&&this._completeAnimation(),this._context.clearRect(0,0,this._canvasW,this._canvasH),this._context.save(),this._context.translate(this._centerX,this._centerY),this._context.lineWidth=1.5,this._renderBase&&this._basePolygon.render(this._context),this._basePolygon.renderChildren(this._context,this._progress),this._context.restore()}}]),t}(),pageLoading={settings:window.cnblogsConfig.loading,spring:null,spinner:null,initRebound:function(){var t=pageLoading.settings.rebound,i=new rebound.SpringSystem;pageLoading.spring=i.createSpring(t.tension,t.friction)},initSpinner:function(){var t=pageLoading.settings.spinner;pageLoading.spinner=new Spinner(t)},init:function(){pageLoading.initRebound(),pageLoading.initSpinner(),pageLoading.spinner.init(pageLoading.spring,!0),setTimeout(function(){pageLoading.spinner.setComplete()},6e3)},loadSomething:function(){var t=new XMLHttpRequest;t.addEventListener("progress",function(t){if(t.lengthComputable){var i=Math.ceil(t.loaded/t.total*100);console.log("ajax loding percent",i),pageLoading.spring.setEndValue(.01*i)}}),t.addEventListener("load",function(t){pageLoading.spinner.setComplete()}),t.open("GET","/img/something.jpg"),t.send()}};
//# sourceMappingURL=/sm/e253b691b380bc849055f909a4e3665c15b728ed888015cdcd4490ccdc6c5793.map
